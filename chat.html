<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ›ãƒ†ãƒ«Q&Aãƒãƒ£ãƒƒãƒˆ</title>
<style>
html, body{margin:0;padding:0;font-family:sans-serif;height:100%;width:100%;background:#f5f5f5;}
#chatbox{
  width:450px; height:65vh;
  position:fixed; top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:#fff;border:1px solid #ccc;
  border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,.3);
  display:flex; flex-direction:column;
  z-index:9999; overflow:hidden;
}
#chatHeader{
  background:#2e7d32;color:#fff;
  padding:10px; font-size:16px; font-weight:bold;
  display:flex; gap:8px; align-items:flex-start;
}
.backBtn{cursor:pointer;font-size:18px;padding:2px 6px;border-radius:6px;}
.backBtn:hover{background:rgba(255,255,255,.2);}
#messages{flex:1;overflow-y:auto;padding:10px;background:#fafafa;}
.msg{margin:6px 0;padding:8px 10px;border-radius:10px;max-width:80%;word-wrap:break-word;font-size:14px;}
.user{background:#d1f0d1;align-self:flex-end;}
.bot{background:#f0f0f0;align-self:flex-start;}
#inputArea{display:flex;border-top:1px solid #ddd;padding:5px 10px;}
#userInput{flex:1;padding:8px;border-radius:8px;border:1px solid #ccc;outline:none;font-size:14px;}
#sendBtn,#micBtn{margin-left:5px;padding:8px 12px;border:none;border-radius:8px;background:#0078d7;color:#fff;cursor:pointer;font-size:14px;}
#sendBtn:hover,#micBtn:hover{background:#005fa3;}
@media(max-width:600px){
  #chatbox{
    width:95%; height:90vh;
    top:50%; left:50%;
    transform:translate(-50%,-50%);
    border-radius:12px;
  }
}
</style>
</head>
<body>

<div id="chatbox">
  <div id="chatHeader">
    <span class="backBtn" title="å…¬å¼ã‚µã‚¤ãƒˆã¸æˆ»ã‚‹">â†</span>
    <div>
      ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ›ãƒ†ãƒ«Q&Aãƒãƒ£ãƒƒãƒˆã§ã™ã€‚<br>
      ä¸‹è¨˜ç›´æ¥å…¥åŠ›ã€ã‚¹ãƒãƒ›éŸ³å£°å…¥åŠ›å¯¾å¿œã§ã™ã€‚
    </div>
  </div>

  <div id="messages"></div>

  <div id="inputArea">
    <input id="userInput" placeholder="ã”è³ªå•ã‚’ã©ã†ã...">
    <button id="micBtn">ğŸ¤</button>
    <button id="sendBtn">é€ä¿¡</button>
  </div>
</div>

<script>
/* ===== æˆ»ã‚‹ãƒœã‚¿ãƒ³ ===== */
document.querySelector(".backBtn").onclick=()=>{
  window.open("https://www.centralhoteltoride.com/","_blank","noopener");
};

/* ===== FAQå…¨æ–‡ï¼ˆæŠœç²‹ã§ã¯ãªãå…ƒã®ã¾ã¾å…¥ã‚Œã‚‹ã“ã¨ï¼‰ ===== */
const faq=[
{
keywords:["ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³","ã¡ã‡ã£ãã„ã‚“","ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ™‚é–“"],
answer:`ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ™‚é–“ã¯å®¿æ³Šå½“æ—¥15:00ã€œã§ã™ã€‚æ—©ã‚ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚’ã”å¸Œæœ›ã®éš›ã¯æœ‰å„Ÿã«ã‚ˆã‚‹ã”å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã¾ãŸã¯ã€äº‹å‰ã« 0297-72-1123 ã¾ã§ãŠå•åˆã‚ã›ãã ã•ã„ã€‚ãŠå¾…ã¡ã„ãŸã ãéš›ã«ã¯ã‚¦ã‚¨ãƒ«ã‚«ãƒ ãƒ‰ãƒªãƒ³ã‚¯ã‚³ãƒ¼ãƒŠãƒ¼ã‚‚ã”ã–ã„ã¾ã™ã®ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚`
},
{
keywords:["ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ","ã¡ã‡ã£ãã‚ã†ã¨","ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ™‚é–“","ã‚ªãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ã‚¸","é…ã‚","é…ã","ãƒ¬ã‚¤ãƒˆ","è¶…é","å»¶é•·"],
answer:`ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ™‚é–“ã¯ç¿Œæœ10:00ã§ã™ã€‚ï¼ˆãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚Šç•°ãªã‚‹å ´åˆãŒã”ã–ã„ã¾ã™ï¼‰æœ‰å„Ÿã«ã‚ˆã‚‹ã”å¯¾å¿œã‚‚å¯èƒ½ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã¾ãŸã¯ã€äº‹å‰ã« 0297-72-1123 ã¾ã§ãŠå•åˆã‚ã›ãã ã•ã„ã€‚`
},
/* ã“ã“ã«æ®‹ã‚Šã®å…¨æ–‡FAQã‚’ã™ã¹ã¦å…¥ã‚Œã‚‹ */
];

/* ===== ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼è¡¨ç¤ºé–¢æ•° ===== */
function addMessageTypewriter(text,sender){
  const msgDiv=document.createElement("div");
  msgDiv.className="msg "+sender;
  document.getElementById("messages").appendChild(msgDiv);
  let i=0;
  const interval=setInterval(()=>{
    if(i<text.length){
      msgDiv.textContent+=text.charAt(i);
      i++;
      msgDiv.scrollIntoView({behavior:"smooth"});
    } else { clearInterval(interval); }
  },20);
}

/* ===== QAæ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ ===== */
function localResponse(rawMsg){
  if(!rawMsg) return "";
  const norm=rawMsg.normalize("NFKC").toLowerCase();
  for(let item of faq){
    for(let kw of item.keywords){
      if(norm.includes(kw.toLowerCase())) return item.answer;
    }
  }
  return "ã™ã¿ã¾ã›ã‚“ã€ãã®ã”è³ªå•ã«ã¯ã¾ã å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚0297-72-1123ã¾ã§ãŠå•ã„åˆã‚ã›ãŠé¡˜ã„ã—ã¾ã™ã€‚";
}

/* ===== ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ ===== */
function sendMessage(){
  const input=document.getElementById("userInput");
  const raw=input.value.trim();
  if(!raw) return;
  const userDiv=document.createElement("div");
  userDiv.className="msg user";
  userDiv.textContent=raw;
  document.getElementById("messages").appendChild(userDiv);
  userDiv.scrollIntoView({behavior:"smooth"});
  input.value="";
  const answer=localResponse(raw);
  setTimeout(()=>{ addMessageTypewriter(answer,"bot"); },120);
}
document.getElementById("sendBtn").addEventListener("click",sendMessage);
document.getElementById("userInput").addEventListener("keydown",function(e){
  if(e.key==="Enter"){ e.preventDefault(); sendMessage(); }
});

/* ===== éŸ³å£°å…¥åŠ› ===== */
let recognition;
const micBtn=document.getElementById("micBtn");
if('webkitSpeechRecognition' in window){
  recognition=new webkitSpeechRecognition();
  recognition.lang="ja-JP";
  recognition.continuous=false;
  recognition.interimResults=false;
  recognition.onstart=function(){ micBtn.textContent="ğŸ”´"; }
  recognition.onend=function(){ micBtn.textContent="ğŸ¤"; }
  recognition.onresult=function(event){
    let transcript=event.results[0][0].transcript.trim().replace(/[ã€‚ï¼]/g,"");
    document.getElementById("userInput").value=transcript;
    sendMessage();
  };
  recognition.onerror=function(event){ micBtn.textContent="ğŸ¤"; console.error(event.error); }
  micBtn.addEventListener("click",()=>{ try{recognition.start();}catch(e){console.warn(e);} });
}else{ micBtn.style.display="none"; }
</script>

</body>
</html>
